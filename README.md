# API Социальной сети для обмена фотографиями

Backend-приложение для социальной сети, которая позволяет пользователям делиться фотографиями, писать посты, комментировать и ставить лайки.

## Особенности проекта

- **Авторизация и аутентификация**: JWT-токены для безопасного доступа к API
- **Управление постами**: Создание, чтение, обновление и удаление постов
- **Загрузка изображений**: Поддержка загрузки основного и множества дополнительных изображений к посту
- **Комментарии**: Возможность комментировать посты других пользователей
- **Лайки**: Система оценки постов с помощью лайков
- **Права доступа**: Разграничение прав, позволяющее только авторам редактировать свои посты

## Технический стек

- **Язык программирования**: Python 3.9+
- **Фреймворк**: Django 5, Django REST Framework
- **База данных**: SQLite (в разработке), PostgreSQL (рекомендуется для продакшн)
- **Аутентификация**: Token Authentication
- **Инструменты для работы с изображениями**: Pillow

## Структура проекта

```
social_network/
├── posts/                 # Приложение для работы с постами
│   ├── migrations/        # Миграции базы данных
│   ├── admin.py           # Настройки админ-панели
│   ├── models.py          # Модели данных
│   ├── serializers.py     # Сериализаторы для API
│   ├── urls.py            # URL маршруты
│   └── views.py           # Представления API
├── social_network/        # Основной проект Django
│   ├── settings.py        # Настройки проекта
│   ├── urls.py            # Основные URL маршруты
│   └── wsgi.py            # WSGI конфигурация
├── media/                 # Загруженные пользователями файлы
├── static/                # Статические файлы
├── manage.py              # Скрипт управления Django
└── requirements.txt       # Зависимости проекта
```

## API эндпоинты

| Метод | Эндпоинт                    | Описание                                 | Требует авторизации |
|-------|-----------------------------|-----------------------------------------|--------------------|
| POST  | `/api-token-auth/`          | Получение токена авторизации             | Нет                |
| GET   | `/api/posts/`               | Получение списка всех постов             | Нет                |
| POST  | `/api/posts/`               | Создание нового поста                    | Да                 |
| GET   | `/api/posts/{id}/`          | Получение деталей поста                  | Нет                |
| PUT   | `/api/posts/{id}/`          | Обновление поста целиком                 | Да (только автор)  |
| PATCH | `/api/posts/{id}/`          | Частичное обновление поста               | Да (только автор)  |
| DELETE| `/api/posts/{id}/`          | Удаление поста                           | Да (только автор)  |
| POST  | `/api/posts/{id}/comment/`  | Добавление комментария к посту           | Да                 |
| POST  | `/api/posts/{id}/like/`     | Добавление лайка к посту                 | Да                 |
| DELETE| `/api/posts/{id}/like/`     | Удаление лайка с поста                   | Да                 |
| POST  | `/api/posts/{id}/images/`   | Добавление дополнительного изображения   | Да (только автор)  |

## Модели данных

### Post
- `author`: ForeignKey на пользователя
- `text`: Текст поста
- `image`: Основное изображение поста
- `created_at`: Дата создания поста

### PostImage
- `post`: ForeignKey на пост
- `image`: Дополнительное изображение поста
- `created_at`: Дата добавления изображения

### Comment
- `author`: ForeignKey на пользователя
- `post`: ForeignKey на пост
- `text`: Текст комментария
- `created_at`: Дата создания комментария

### Like
- `user`: ForeignKey на пользователя
- `post`: ForeignKey на пост
- `created_at`: Дата создания лайка

## Инструкция по запуску проекта

### Требования
- Python 3.9+
- pip (менеджер пакетов Python)

### Шаги для запуска
1. Клонировать репозиторий:
```bash
git clone https://github.com/yourusername/spd-diplom.git
cd spd-diplom
```

2. Установить зависимости:
```bash
cd social_network
pip install -r requirements.txt
```

3. Применить миграции:
```bash
python manage.py migrate
```

4. Создать суперпользователя:
```bash
python manage.py createsuperuser
```

5. Запустить сервер:
```bash
python manage.py runserver
```

### Пример использования API

#### Получение токена
```bash
curl -X POST http://127.0.0.1:8000/api-token-auth/ -H "Content-Type: application/json" -d '{"username":"admin","password":"adminpassword"}'
```

#### Создание поста
```bash
curl -X POST http://127.0.0.1:8000/api/posts/ -H "Authorization: Token YOUR_TOKEN" -F "text=Мой новый пост" -F "image=@path/to/image.jpg"
```

#### Добавление комментария
```bash
curl -X POST http://127.0.0.1:8000/api/posts/1/comment/ -H "Authorization: Token YOUR_TOKEN" -H "Content-Type: application/json" -d '{"text":"Отличный пост!"}'
```

## Дальнейшее развитие проекта

Возможные направления для улучшения проекта:
- Профили пользователей с аватарами и дополнительной информацией
- Подписки на других пользователей
- Хэштеги и поиск по хэштегам
- Уведомления о новых комментариях и лайках
- Интеграция с геолокацией для отметки места на фотографиях

## Разработчик

Anton Kondrashov - anton.kondrashov@example.com
